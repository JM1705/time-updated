function getWeek(e){const o=new Date(e.getFullYear(),0,1);return Math.ceil(((e-o)/864e5+o.getDay())/7)}function setClock(e,o,t){document.getElementById("clockMins").innerText=e,document.getElementById("clockSecs").innerText=o,document.getElementById("clockSubHeading").innerText=t,document.getElementById("clockTime").ariaLabel="––"===e?"No time displayed":`${e} minutes and ${o} seconds left until the next period`}function SchoolPeriod(e,o,t){this.title=e,this.startTime=new Date,o=o.split(":"),this.startTime.setHours(o[0]),this.startTime.setMinutes(o[1]),this.startTime.setSeconds(0),this.endTime=new Date,t=t.split(":"),this.endTime.setHours(t[0]),this.endTime.setMinutes(t[1]),this.endTime.setSeconds(0),this.times=[this.startTime,this.endTime]}const periods={},timetable=[];function initPeriods(){periods.extendedMentor=[new SchoolPeriod("Period 1","8:40","9:40"),new SchoolPeriod("Period 2","9:40","10:40"),new SchoolPeriod("Mentor","11:05","11:35"),new SchoolPeriod("Period 3","11:35","12:35"),new SchoolPeriod("Period 4","12:40","13:40"),new SchoolPeriod("Period 5","14:30","15:30")],periods.noMentor=[new SchoolPeriod("Period 1","8:40","9:35"),new SchoolPeriod("Period 2","9:35","10:30"),new SchoolPeriod("Period 3","10:55","11:50"),new SchoolPeriod("Period 4","11:55","12:50"),new SchoolPeriod("Period 5","13:40","14:35"),new SchoolPeriod("Period 6","14:35","15:30")],periods.coCurricular=[new SchoolPeriod("Period 1","8:40","9:35"),new SchoolPeriod("Period 2","9:35","10:30"),new SchoolPeriod("Period 3","10:55","11:50"),new SchoolPeriod("Period 4","11:50","12:45"),new SchoolPeriod("Co-curricular","13:30","15:30")],periods.standard=[new SchoolPeriod("Period 1","8:40","9:40"),new SchoolPeriod("Period 2","9:40","10:40"),new SchoolPeriod("Mentor","11:05","11:20"),new SchoolPeriod("Period 3","11:20","12:20"),new SchoolPeriod("Period 4","12:25","13:25"),new SchoolPeriod("Period 5","14:15","15:15")],periods.AprilFools=[new SchoolPeriod("English 3/4 Orals","8:00","9:35"),new SchoolPeriod("Specialist 1/2 SAC","9:37","11:10"),new SchoolPeriod("Methods 3/4 Quiz 2","11:12","12:30"),new SchoolPeriod("Biology 3/4 SAC","12:30","12:35"),new SchoolPeriod("Global Politics 3/4 SAC","12:37","12:39"),new SchoolPeriod("Economics 1/2 test","12:50","13:30"),new SchoolPeriod("Rescheduled lunch","13:30","14:00"),new SchoolPeriod("French 1/2 SAC","14:00","14:15"),new SchoolPeriod("the day","14:30","15:15"),new SchoolPeriod("April fools!","15:15","23:59")],timetable[0]=[periods.extendedMentor,periods.noMentor,periods.coCurricular,periods.standard,periods.AprilFools],timetable[1]=[periods.extendedMentor,periods.noMentor,periods.coCurricular,periods.standard,periods.standard]}function updateClock(){const e=new Date,o=getWeek(e)%2?1:0,t=document.getElementById("weekIndicator");t.innerText="Week "+(o?"B":"A"),t.setAttribute("data-week",o?"A":"B");let r=[];if(6===e.getDay()||0===e.getDay())return setClock("––","––","Relax, it's the weekend"),!1;r=timetable[o][e.getDay()-1];const i=e.getTime(),n=r.filter((e=>i<e.endTime.getTime()));if(0===n.length){setClock("––","––","Relax, the day is over");const o=new Date;return o.setHours(24),o.setMinutes(0),o.setSeconds(0),setTimeout(updateClock,o-e+2e3),setTimeout(initPeriods,o-e+1e3),!1}const d=n[0];let s,l;i<d.startTime.getTime()?(s=(d.startTime-e)/1e3,l=`Until ${d.title} starts`):(s=(d.endTime-e)/1e3,l=`Until ${d.title} ends`);const c=Math.floor(s/3600);let a=Math.floor(s/60)%60,g=Math.floor(s%60);a+=60*c,a=String(a).padStart(2,"0"),g=String(g).padStart(2,"0"),setClock(`${a}:`,g,l),setTimeout(updateClock,500)}function setRandomBGImage(){const e=new URLSearchParams(window.location.search).get("cimg");if(null!==e)return document.body.style.backgroundImage=`url(${e})`,!1;const o=["./backgrounds/autumnal-peach-preview.png","./backgrounds/bright-rain-preview.png","./backgrounds/good-vibes-preview.png","./backgrounds/moonrise-preview.png","./backgrounds/rose-thorn-preview.png","./backgrounds/autumnal-peach-preview.png","./backgrounds/bright-rain-preview.png","./backgrounds/good-vibes-preview.png","./backgrounds/moonrise-preview.png","./backgrounds/rose-thorn-preview.png","./backgrounds/autumnal-peach-preview.png","./backgrounds/bright-rain-preview.png","./backgrounds/good-vibes-preview.png","./backgrounds/moonrise-preview.png","./backgrounds/rose-thorn-preview.png","./backgrounds/autumnal-peach-preview.png","./backgrounds/bright-rain-preview.png","./backgrounds/good-vibes-preview.png","./backgrounds/moonrise-preview.png","./backgrounds/rose-thorn-preview.png","./backgrounds/rickroll-preview.jfif"],t=o[Math.floor(Math.random()*o.length)];document.body.style.backgroundImage=`url(${t})`}initPeriods(),updateClock(),setRandomBGImage();const alertElem=document.getElementById("alert");if(alertElem){const e=alertElem.dataset.alertId;"true"!==window.localStorage.getItem("isAlertClosed_"+e)&&(alertElem.style.display="flex"),document.getElementById("alertClose").addEventListener("click",(()=>{alertElem.style.display="none",window.localStorage.setItem("isAlertClosed_"+e,!0)}))}
