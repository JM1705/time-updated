function getWeek(e){const t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)}function setClock(e,t,o){document.getElementById("clockMins").innerText=e,document.getElementById("clockSecs").innerText=t,document.getElementById("clockSubHeading").innerText=o,document.getElementById("clockTime").ariaLabel="––"===e?"No time displayed":`${e} minutes and ${t} seconds left until the next period`}function SchoolPeriod(e,t,o){this.title=e,this.startTime=new Date,t=t.split(":"),this.startTime.setHours(t[0]),this.startTime.setMinutes(t[1]),this.startTime.setSeconds(0),this.endTime=new Date,o=o.split(":"),this.endTime.setHours(o[0]),this.endTime.setMinutes(o[1]),this.endTime.setSeconds(0),this.times=[this.startTime,this.endTime]}const periods={},timetable=[];function initPeriods(){periods.extendedMentor=[new SchoolPeriod("Period 1","8:40","9:40"),new SchoolPeriod("Period 2","9:40","10:40"),new SchoolPeriod("Mentor","11:05","11:35"),new SchoolPeriod("Period 3","11:35","12:35"),new SchoolPeriod("Period 4","12:40","13:40"),new SchoolPeriod("Period 5","14:30","15:30")],periods.noMentor=[new SchoolPeriod("Period 1","8:40","9:40"),new SchoolPeriod("Period 2","9:40","10:40"),new SchoolPeriod("Period 3","11:05","12:05"),new SchoolPeriod("Period 4","12:10","13:10"),new SchoolPeriod("Period 5","14:00","15:00")],periods.coCurricular=[new SchoolPeriod("Period 1","8:40","9:35"),new SchoolPeriod("Period 2","9:35","10:30"),new SchoolPeriod("Period 3","10:55","11:50"),new SchoolPeriod("Period 4","11:50","12:45"),new SchoolPeriod("Co-curricular","13:30","15:30")],periods.standard=[new SchoolPeriod("Period 1","8:40","9:40"),new SchoolPeriod("Period 2","9:40","10:40"),new SchoolPeriod("Mentor","11:05","11:20"),new SchoolPeriod("Period 3","11:20","12:20"),new SchoolPeriod("Period 4","12:25","13:25"),new SchoolPeriod("Period 5","14:15","15:15")],timetable[0]=[periods.extendedMentor,periods.noMentor,periods.coCurricular,periods.standard,periods.standard],timetable[1]=[periods.extendedMentor,periods.noMentor,periods.coCurricular,periods.standard,periods.standard]}function updateClock(){const e=new Date,t=getWeek(e)%2?1:0,o=document.getElementById("weekIndicator");o.innerText="Week "+(t?"A":"B"),o.setAttribute("data-week",t?"A":"B");let i=[];if(6===e.getDay()&&0===e.getDay())return setClock("––","––","Relax, it's the weekend"),!1;i=timetable[t][e.getDay()-1];const r=e.getTime(),n=i.filter((e=>r<e.endTime.getTime()));if(0===n.length){setClock("––","––","Relax, the day is over");const t=new Date;return t.setHours(24),t.setMinutes(0),t.setSeconds(0),setTimeout(updateClock,t-e+2e3),setTimeout(initPeriods,t-e+1e3),!1}const d=n[0];let s,l;r<d.startTime.getTime()?(s=(d.startTime-e)/1e3,l=`Until ${d.title} starts`):(s=(d.endTime-e)/1e3,l=`Until ${d.title} ends`);const a=Math.floor(s/3600);let c=Math.floor(s/60)%60,m=Math.floor(s%60);c+=60*a,c=String(c).padStart(2,"0"),m=String(m).padStart(2,"0"),setClock(`${c}:`,m,l),setTimeout(updateClock,500)}function setRandomBGImage(){const e=new URLSearchParams(window.location.search).get("cimg");if(null!==e)return document.body.style.backgroundImage=`url(${e})`,!1;const t=["./backgrounds/autumnal-peach-preview.png","./backgrounds/bright-rain-preview.png","./backgrounds/glass-rainbow-preview.png","./backgrounds/good-vibes-preview.png","./backgrounds/moonrise-preview.png","./backgrounds/rose-thorn-preview.png"],o=t[Math.floor(Math.random()*t.length)];document.body.style.backgroundImage=`url(${o})`}initPeriods(),updateClock(),setRandomBGImage();const alertElem=document.getElementById("alert"),alertId=alertElem.dataset.alertId;"true"!==window.localStorage.getItem("isAlertClosed_"+alertId)&&(alertElem.style.display="flex"),document.getElementById("alertClose").addEventListener("click",(()=>{alertElem.style.display="none",window.localStorage.setItem("isAlertClosed_"+alertId,!0)}));
